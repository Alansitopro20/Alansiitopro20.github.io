<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>AR Cards con dos marcadores</title>
  <script src="https://cdn.jsdelivr.net/npm/aframe@1.2.0/dist/aframe.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/mind-ar@1.1.4/dist/mindar-image-aframe.prod.js"></script>
  <style>
    body { margin: 0; overflow: hidden; font-family: sans-serif; }

    #ui {
      position: absolute;
      bottom: 20px;
      left: 50%;
      transform: translateX(-50%);
      display: flex;
      gap: 10px;
    }

    button {
      padding: 10px 15px;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      font-size: 14px;
      font-weight: bold;
    }

    /* Cards */
    .card {
      position: absolute;
      top: 20px;
      right: 20px;
      width: 200px;
      height: 120px;
      display: none;
      justify-content: center;
      align-items: center;
      color: white;
      font-size: 22px;
      font-weight: bold;
      border-radius: 12px;
      box-shadow: 0px 4px 10px rgba(0,0,0,0.4);
    }

    /* Cards set A (marcador 1) */
    .cardA:nth-child(1){background:red;}
    .cardA:nth-child(2){background:blue;}
    .cardA:nth-child(3){background:green;}
    .cardA:nth-child(4){background:orange;}
    .cardA:nth-child(5){background:purple;}

    /* Cards set B (marcador 2) */
    .cardB:nth-child(1){background:teal;}
    .cardB:nth-child(2){background:brown;}
    .cardB:nth-child(3){background:darkblue;}
    .cardB:nth-child(4){background:darkred;}
    .cardB:nth-child(5){background:darkgreen;}
    .cardB:nth-child(6){background:darkorange;}
    .cardB:nth-child(7){background:indigo;}

  </style>
</head>
<body>
  <!-- Cámara AR -->
  <a-scene mindar-image="imageTargetSrc: ./targets1.mind, ./targets2.mind;" embedded color-space="sRGB">
    <a-camera position="0 0 0" look-controls="enabled: false"></a-camera>

    <!-- Marcador 1 -->
    <a-entity mindar-image-target="targetIndex: 0">
      <a-plane color="yellow" position="0 0 0" height="0.5" width="0.5"></a-plane>
    </a-entity>

    <!-- Marcador 2 -->
    <a-entity mindar-image-target="targetIndex: 1">
      <a-plane color="cyan" position="0 0 0" height="0.5" width="0.5"></a-plane>
    </a-entity>
  </a-scene>

  <!-- UI botones -->
  <div id="ui" style="display:none;">
    <button id="liberarBtn">Liberar</button>
    <button id="reescanearBtn">Reescanear</button>
    <button id="prevBtn">⟨ Anterior</button>
    <button id="nextBtn">Siguiente ⟩</button>
  </div>

  <!-- Cards Set A -->
  <div id="cardsA">
    <div class="card cardA">1</div>
    <div class="card cardA">2</div>
    <div class="card cardA">3</div>
    <div class="card cardA">4</div>
    <div class="card cardA">5</div>
  </div>

  <!-- Cards Set B -->
  <div id="cardsB">
    <div class="card cardB">11</div>
    <div class="card cardB">12</div>
    <div class="card cardB">13</div>
    <div class="card cardB">14</div>
    <div class="card cardB">15</div>
    <div class="card cardB">16</div>
    <div class="card cardB">17</div>
  </div>

  <script>
    const ui = document.getElementById("ui");
    const liberarBtn = document.getElementById("liberarBtn");
    const reescanearBtn = document.getElementById("reescanearBtn");
    const prevBtn = document.getElementById("prevBtn");
    const nextBtn = document.getElementById("nextBtn");

    const cardsA = document.querySelectorAll("#cardsA .card");
    const cardsB = document.querySelectorAll("#cardsB .card");

    let currentSet = null; // "A" o "B"
    let currentIndex = 0;

    function showCard(set, index){
      // Oculta todo
      cardsA.forEach(c=>c.style.display="none");
      cardsB.forEach(c=>c.style.display="none");
      // Muestra el card correcto
      if(set==="A") cardsA[index].style.display="flex";
      if(set==="B") cardsB[index].style.display="flex";
    }

    // Botones
    prevBtn.addEventListener("click", ()=>{
      if(currentSet==="A"){
        currentIndex = (currentIndex - 1 + cardsA.length) % cardsA.length;
        showCard("A", currentIndex);
      } else if(currentSet==="B"){
        currentIndex = (currentIndex - 1 + cardsB.length) % cardsB.length;
        showCard("B", currentIndex);
      }
    });

    nextBtn.addEventListener("click", ()=>{
      if(currentSet==="A"){
        currentIndex = (currentIndex + 1) % cardsA.length;
        showCard("A", currentIndex);
      } else if(currentSet==="B"){
        currentIndex = (currentIndex + 1) % cardsB.length;
        showCard("B", currentIndex);
      }
    });

    liberarBtn.addEventListener("click", ()=>{
      cardsA.forEach(c=>c.style.display="none");
      cardsB.forEach(c=>c.style.display="none");
      ui.style.display="none";
      currentSet=null;
    });

    reescanearBtn.addEventListener("click", ()=>{
      cardsA.forEach(c=>c.style.display="none");
      cardsB.forEach(c=>c.style.display="none");
      currentSet=null;
      ui.style.display="none";
    });

    // Eventos de detección
    document.querySelector('[mindar-image-target="targetIndex: 0"]').addEventListener("targetFound", ()=>{
      currentSet="A";
      currentIndex=0;
      showCard("A",0);
      ui.style.display="flex";
    });

    document.querySelector('[mindar-image-target="targetIndex: 1"]').addEventListener("targetFound", ()=>{
      currentSet="B";
      currentIndex=0;
      showCard("B",0);
      ui.style.display="flex";
    });

    document.querySelector('[mindar-image-target="targetIndex: 0"]').addEventListener("targetLost", ()=>{
      if(currentSet==="A") ui.style.display="none";
    });

    document.querySelector('[mindar-image-target="targetIndex: 1"]').addEventListener("targetLost", ()=>{
      if(currentSet==="B") ui.style.display="none";
    });
  </script>
</body>
</html>


