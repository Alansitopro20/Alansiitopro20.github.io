<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Multi Targets Cards</title>
  <script src="https://cdn.jsdelivr.net/npm/mind-ar@1.1.5/dist/mindar-image-three.prod.js"></script>
  <style>
    body { margin: 0; overflow: hidden; font-family: Verdana; }

    /* Contenedor general de las tarjetas */
    .card-container {
      position: absolute;
      top: 4px;
      left: 50%;
      transform: translateX(-50%);
      display: flex;
      gap: 10px;
      z-index: 10;
      display: none; /* Ocultas por defecto */
    }

    .card {
      width: 160px;
      height: 90px;
      display: flex;
      justify-content: center;
      align-items: center;
      font-size: 18px;
      font-weight: bold;
      border-radius: 10px;
      box-shadow: 0 0 8px rgba(0,0,0,0.4);
      color: white;
    }

    .card-set1 .card { background: rgba(0, 150, 255, 0.6); }
    .card-set2 .card { background: rgba(255, 80, 100, 0.6); }

    .controls {
      position: absolute;
      top: 110px;
      left: 50%;
      transform: translateX(-50%);
      display: flex;
      gap: 10px;
      z-index: 10;
      display: none; /* Ocultos por defecto */
    }

    button {
      padding: 8px 16px;
      border: none;
      border-radius: 8px;
      background: #222;
      color: #fff;
      font-weight: bold;
      cursor: pointer;
    }
    button:hover { background: #444; }
  </style>
</head>
<body>
  <!-- Set 1 (Cards 1-10) -->
  <div class="card-container card-set1" id="cardSet1">
    <div class="card">Card 1</div>
    <div class="card">Card 2</div>
    <div class="card">Card 3</div>
    <div class="card">Card 4</div>
    <div class="card">Card 5</div>
    <div class="card">Card 6</div>
    <div class="card">Card 7</div>
    <div class="card">Card 8</div>
    <div class="card">Card 9</div>
    <div class="card">Card 10</div>
  </div>

  <!-- Set 2 (Cards 11-17) -->
  <div class="card-container card-set2" id="cardSet2">
    <div class="card">Card 11</div>
    <div class="card">Card 12</div>
    <div class="card">Card 13</div>
    <div class="card">Card 14</div>
    <div class="card">Card 15</div>
    <div class="card">Card 16</div>
    <div class="card">Card 17</div>
  </div>

  <!-- Controles -->
  <div class="controls" id="controls">
    <button id="prevBtn">‚¨ÖÔ∏è</button>
    <button id="nextBtn">‚û°Ô∏è</button>
  </div>

  <script type="module">
    import * as THREE from "https://cdn.jsdelivr.net/npm/three@0.152.0/build/three.module.js";
    import { MindARThree } from "https://cdn.jsdelivr.net/npm/mind-ar@1.1.5/dist/mindar-image-three.prod.js";

    // Inicializar MindAR
    const mindarThree = new MindARThree({
      container: document.body,
      imageTargetSrc: "./targets1.mind", // üîπ Cambia si usas otro archivo
    });

    const { renderer, scene, camera } = mindarThree;

    // Targets
    const anchor1 = mindarThree.addAnchor(0); // target 1
    const anchor2 = mindarThree.addAnchor(1); // target 2

    const cardSet1 = document.getElementById("cardSet1");
    const cardSet2 = document.getElementById("cardSet2");
    const controls = document.getElementById("controls");

    let currentSet = null;
    let currentIndex = 0;

    function showCards(set, index = 0) {
      // Ocultar todo
      cardSet1.style.display = "none";
      cardSet2.style.display = "none";
      controls.style.display = "none";

      if (set) {
        currentSet = set;
        currentIndex = index;
        set.style.display = "flex";
        controls.style.display = "flex";
        updateVisibleCard();
      }
    }

    function updateVisibleCard() {
      if (!currentSet) return;
      const cards = currentSet.querySelectorAll(".card");
      cards.forEach((c, i) => c.style.display = (i === currentIndex ? "flex" : "none"));
    }

    document.getElementById("prevBtn").addEventListener("click", () => {
      const cards = currentSet.querySelectorAll(".card");
      currentIndex = (currentIndex - 1 + cards.length) % cards.length;
      updateVisibleCard();
    });

    document.getElementById("nextBtn").addEventListener("click", () => {
      const cards = currentSet.querySelectorAll(".card");
      currentIndex = (currentIndex + 1) % cards.length;
      updateVisibleCard();
    });

    // Eventos de detecci√≥n
    anchor1.onTargetFound = () => showCards(cardSet1, 0);
    anchor1.onTargetLost = () => showCards(null);

    anchor2.onTargetFound = () => showCards(cardSet2, 0);
    anchor2.onTargetLost = () => showCards(null);

    // Arrancar escaneo inmediatamente üî•
    mindarThree.start();
    renderer.setAnimationLoop(() => {
      renderer.render(scene, camera);
    });
  </script>
</body>
</html>
