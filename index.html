<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>AR con múltiples targets</title>
  <script src="https://cdn.jsdelivr.net/npm/three@0.131.3/build/three.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/mind-ar/dist/mindar-image-three.prod.js"></script>
  <style>
    body { margin: 0; overflow: hidden; font-family: Verdana; }
    #ui {
      position: fixed;
      bottom: 20px;
      left: 50%;
      transform: translateX(-50%);
      display: flex;
      gap: 10px;
      z-index: 10;
    }
    .card {
      display: none;
      position: fixed;
      top: 20%;
      left: 50%;
      transform: translateX(-50%);
      padding: 20px;
      width: 200px;
      height: 120px;
      border-radius: 12px;
      box-shadow: 0 4px 8px rgba(0,0,0,0.2);
      color: white;
      font-size: 20px;
      text-align: center;
      z-index: 9;
    }
    .group1 { background: #0077cc; } /* Cards target1 */
    .group2 { background: #cc5500; } /* Cards target2 */
  </style>
</head>
<body>
  <div id="ui">
    <button id="prevBtn">⬅️</button>
    <button id="nextBtn">➡️</button>
  </div>

  <!-- Cards target1 (1-10) -->
  <div id="cards1">
    <div class="card group1" id="card1">Card 1</div>
    <div class="card group1" id="card2">Card 2</div>
    <div class="card group1" id="card3">Card 3</div>
    <div class="card group1" id="card4">Card 4</div>
    <div class="card group1" id="card5">Card 5</div>
    <div class="card group1" id="card6">Card 6</div>
    <div class="card group1" id="card7">Card 7</div>
    <div class="card group1" id="card8">Card 8</div>
    <div class="card group1" id="card9">Card 9</div>
    <div class="card group1" id="card10">Card 10</div>
  </div>

  <!-- Cards target2 (11-17) -->
  <div id="cards2">
    <div class="card group2" id="card11">Card 11</div>
    <div class="card group2" id="card12">Card 12</div>
    <div class="card group2" id="card13">Card 13</div>
    <div class="card group2" id="card14">Card 14</div>
    <div class="card group2" id="card15">Card 15</div>
    <div class="card group2" id="card16">Card 16</div>
    <div class="card group2" id="card17">Card 17</div>
  </div>

  <script type="module">
    const mindarThree = new window.MINDAR.IMAGE.MindARThree({
      container: document.body,
      imageTargetSrc: "./targets.mind", // Un único archivo con target1 y target2
    });

    const {renderer, scene, camera} = mindarThree;

    const anchor1 = mindarThree.addAnchor(0); // target1
    const anchor2 = mindarThree.addAnchor(1); // target2

    let activeGroup = null;
    let currentIndex = 0;
    let cards = [];

    const groups = {
      group1: Array.from(document.querySelectorAll("#cards1 .card")),
      group2: Array.from(document.querySelectorAll("#cards2 .card")),
    };

    function showGroup(groupName) {
      hideAll();
      activeGroup = groups[groupName];
      currentIndex = 0;
      if (activeGroup.length > 0) activeGroup[0].style.display = "block";
    }

    function hideAll() {
      Object.values(groups).flat().forEach(c => c.style.display = "none");
    }

    document.getElementById("prevBtn").addEventListener("click", () => {
      if (!activeGroup) return;
      activeGroup[currentIndex].style.display = "none";
      currentIndex = (currentIndex - 1 + activeGroup.length) % activeGroup.length;
      activeGroup[currentIndex].style.display = "block";
    });

    document.getElementById("nextBtn").addEventListener("click", () => {
      if (!activeGroup) return;
      activeGroup[currentIndex].style.display = "none";
      currentIndex = (currentIndex + 1) % activeGroup.length;
      activeGroup[currentIndex].style.display = "block";
    });

    anchor1.onTargetFound = () => { showGroup("group1"); };
    anchor1.onTargetLost = () => { hideAll(); activeGroup = null; };

    anchor2.onTargetFound = () => { showGroup("group2"); };
    anchor2.onTargetLost = () => { hideAll(); activeGroup = null; };

    // Iniciar
    mindarThree.start();
    renderer.setAnimationLoop(() => {
      renderer.render(scene, camera);
    });
  </script>
</body>
</html>
